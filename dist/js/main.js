$(document).ready(function(){function e(){$(".popup-bg").css("height",200+$(window).height())}function t(e,t){e.click(function(e){$(".popup-bg").addClass("active"),$("body").addClass("active"),t.addClass("active"),$("body").addClass("active"),e.preventDefault()}),$(".popup-bg").click(function(){$(this).removeClass("active"),t.removeClass("active"),$("body").removeClass("active")}),$(".popup-close").click(function(){$(".popup-bg").removeClass("active"),t.removeClass("active"),$("body").removeClass("active")}),$(".custom-click").click(function(){$(".customform").removeClass("active")}),t.click(function(e){e.preventDefault(),e.stopPropagation()})}$(window).resize(e()),e(),t($(".global-form"),$(".globalform")),t($(".polit-form"),$(".politform")),t($(".custom-form"),$(".customform")),t($(".popup-sertificate1"),$(".popupsertificate1")),t($(".popup-sertificate2"),$(".popupsertificate2")),t($(".popup-sertificate3"),$(".popupsertificate3")),t($(".popup-sertificate4"),$(".popupsertificate4")),$(".phone").mask("+7 (999) 999-9999"),$(".sertificates__carousel.owl-carousel").owlCarousel({margin:25,dots:!1,loop:!0,mouseDrag:!0,nav:!1,nav:!0,pagination:!0,navText:["<span>&#8249;</span>","<span>&#8250;</span>"],responsive:{0:{items:2,center:!0},985:{items:3},1080:{items:6}}});var l=[{genre:"post",percentage:37,name:"Поставки на АЗС"},{genre:"prom",percentage:14,name:"Промышленность"},{genre:"torg",percentage:12,name:"Предприятия",name2:"торгового комплекса"},{genre:"sx",percentage:12,name:"Сельскохозяйственные",name2:"предприятия"},{genre:"transp",percentage:10,name:"Транспорт"},{genre:"stroit",percentage:8,name:"Строительство"}];if(6<l.length){var a=0,n=_.slice(l,6);_.forEach(n,function(e,t){a+=e.percentage,otherName+=e.name,otherName2+=e.name2}),l.splice(6),l.push({genre:"other",percentage:a,name:otherName,name2:otherName2})}var m=d3.select("#flavour-graph");m.append("g").attr("class","chart-center").attr("transform","translate(350, 250)");for(var p=d3.pie().value(function(e){return e.percentage})(l),r=function(r){var s=l[r].genre,e=l[r].percentage,t=l[r].name,a=l[r].name2;m.select(".chart-center").append("g").attr("class","chart-segment__"+s);var n={innerRadius:0,outerRadius:125,startAngle:p[r].startAngle,endAngle:p[r].endAngle},c=d3.arc()(n),o=d3.arc().centroid(n);if(o[0]=o[0]-7-2*r,r<6){m.select(".chart-segment__"+s).append("path").attr("d",c).attr("class","segment-"+r).attr("fill","#EA0028");var i=function(e,t,a){var n=a?o[0]+a-2*r:o[0];console.log("segment "+r+": "+n),m.select(".chart-segment__"+s).append("text").attr("x",n).attr("y",o[1]).attr("class",e).text(t)};i("segment-"+r+"__text",e.toFixed()),i("segment-"+r+"__text-percentage","%",40),i("segment-"+r+"__text-name",t),i("segment-"+r+"__text-name2",a)}m.select(".segment-0__text").attr("x","40").attr("y","-18"),m.select(".segment-0__text-percentage").attr("x","95").attr("y","-18"),m.select(".segment-1__text").attr("x","-5").attr("y","130"),m.select(".segment-1__text-percentage").attr("y","130"),m.select(".segment-2__text").attr("x","-110").attr("y","100"),m.select(".segment-2__text-percentage").attr("x","-74").attr("y","100"),m.select(".segment-3__text").attr("x","-140").attr("y","20"),m.select(".segment-3__text-percentage").attr("x","-104").attr("y","20"),m.select(".segment-4__text").attr("x","-105").attr("y","-50"),m.select(".segment-4__text-percentage").attr("x","-75").attr("y","-50"),m.select(".segment-5__text").attr("x","-45").attr("y","-87"),m.select(".segment-5__text-percentage").attr("x","-30").attr("y","-87"),m.select(".segment-0__text-name").attr("x","197").attr("y","-172"),m.select(".segment-1__text-name").attr("x","102").attr("y","235"),m.select(".segment-2__text-name").attr("x","-305").attr("y","136"),m.select(".segment-2__text-name2").attr("x","-305").attr("y","152"),m.select(".segment-3__text-name").attr("x","-350").attr("y","8"),m.select(".segment-3__text-name2").attr("x","-350").attr("y","22"),m.select(".segment-4__text-name").attr("x","-245").attr("y","-82"),m.select(".segment-5__text-name").attr("x","-170").attr("y","-172")},s=0;s<l.length;s+=1)r(s);wow=new WOW({boxClass:"wow",animateClass:"animated",offset:0}),(new WOW).init();var c=new Date;function o(){$("*[data-anchor]").each(function(e){var t=$(this).attr("data-anchor");$(this).offset().top-400<=$(window).scrollTop()&&($(".fixed-nav ul li").removeClass("active"),$('[data-menuAnchor="'+t+'"]').addClass("active"))})}document.getElementById("copy").innerHTML=c.getFullYear(),$(".map .map__block").each(function(){$(this).attr("data-block"),$(window)}),$(".fixed-nav li").on("click",function(e){var t=$(this).attr("data-menuAnchor");e.preventDefault();var a=$('[data-anchor="'+t+'"]');$("html,body").stop().animate({scrollTop:$(a).offset().top},1e3)}),o(),$(window).scroll(function(){o()}),$(window).resize(function(){o()}),$(window).scroll(function(){100<$(window).scrollTop()?$(".header").addClass("header-bg"):$("header").removeClass("header-bg")})});